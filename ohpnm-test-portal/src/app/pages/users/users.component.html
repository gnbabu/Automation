<div class="users-container">
  <div class="header-section d-flex justify-content-between align-items-start">
    <div *ngIf="!showForm">
      <h1>User & Role Management</h1>
      <small><i class="bi bi-person-gear me-1"></i> Administrative Task</small>
    </div>
  </div>
  <div *ngIf="!showForm" class="brand-header-underline"></div>
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h4 class="fw-bold mb-1"></h4>
    </div>
    <button class="btn btn-danger" (click)="onAddUser()" *ngIf="!showForm">
      <i class="fas fa-plus me-2"></i> Add New User
    </button>
  </div>
  <div
    *ngIf="!showForm"
    class="filter-card d-flex flex-wrap align-items-center gap-3 p-3"
  >
    <!-- Search -->
    <input
      type="text"
      class="form-control search"
      placeholder="Search by name or email"
      [(ngModel)]="filters.search"
      (ngModelChange)="onFilterChange()"
      style="min-width: 220px"
    />

    <!-- Status -->
    <select
      class="form-select filter-select"
      [(ngModel)]="filters.status"
      (change)="onFilterChange()"
    >
      <option [ngValue]="0">All Status</option>
      <option [ngValue]="1">Active</option>
      <option [ngValue]="2">Suspended</option>
      <option [ngValue]="3">Pending</option>
    </select>

    <!-- Role -->
    <select
      class="form-select filter-select"
      [(ngModel)]="filters.role"
      (change)="onFilterChange()"
    >
      <option [ngValue]="0">All Roles</option>
      <option [ngValue]="1">Admin</option>
      <option [ngValue]="2">Tester</option>
      <option [ngValue]="3">Manager</option>
      <option [ngValue]="4">Viewer</option>
    </select>

    <!-- Priority -->
    <select
      class="form-select filter-select"
      [(ngModel)]="filters.priority"
      (change)="onFilterChange()"
    >
      <option [ngValue]="0">All Tiers</option>
      <option [ngValue]="1">Tier 1</option>
      <option [ngValue]="2">Tier 2</option>
      <option [ngValue]="3">Tier 3</option>
    </select>

    <!-- Checkbox -->
    <div class="form-check ms-2">
      <input class="form-check-input" type="checkbox" id="inProgressCheck" />
      <label class="form-check-label text-black" for="inProgressCheck">
        In Progress
      </label>
    </div>
  </div>
  <div *ngIf="!showForm" class="table-card">
    <h5>Users List</h5>
    <app-user-list
      *ngIf="!showForm"
      [users]="filteredUsers"
      (editUser)="onEditUser($event)"
    >
    </app-user-list>
  </div>
  <app-add-edit-user
    *ngIf="showForm && selectedUser"
    [user]="selectedUser"
    (saved)="onFormSaved()"
    (cancelled)="onCancel()"
  >
  </app-add-edit-user>
</div>
